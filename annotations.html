<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Annotations | Spade</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&family=Lato:wght@300&family=Roboto:wght@300&display=swap" rel="stylesheet">
    <script src="jquery.js"></script>
    <script>
            f = localStorage.getItem("user")
            if(f == undefined) {
                $(location).attr("href", "signin.html")
            } else {
                $(document).ready(() => {
                    let user = JSON.parse(f).id
                    let r = new XMLHttpRequest()
                    r.onreadystatechange = () => {
                        if(r.readyState==4 && r.status==200){
                            let data = JSON.parse(r.response).annotations
                            for(let i=0; i<data.length; i++) {
                                console.log(data[i]["link"])
                                $("#b").append(
                                    `<div class="col-3 pg">
                                        <iframe src="${data[i]["link"]}"></iframe>
                                        <a href="${data[i]["link"]}" target="_blank">
                                            ${data[i]["link"].substr(0,28)}
                                        </a>
                                    </div>`)
                            }
                        }
                    }
                    r.open("GET", "http://localhost:5000/list-annotations", true)
                    r.setRequestHeader("Content-Type", "application/json")
                    r.setRequestHeader("Authorization", "Bearer " + user)
                    r.send(null)
                })
            }
    </script>
    <style>
        html {
            font-size: 30px;
        }
        body {
            background: #ffffff;
        }

        /* Info Header */
        #h {
            background-color: #2e2c2f;
        }
        #nav-cntr {
            width: 100vw;
            margin-top: 1rem;
            margin-bottom: 1rem;
            padding-left: 50px;
            padding-right: 50px;
        }
        .h-link {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            font-family: 'Roboto', sans-serif;
            font-size: 18.75px;
            letter-spacing: 30/1000em;
            padding: 0px;
            color: #ffffff;
        }
        #logo {
            display: flex;
            align-items: center;
            padding: 0px;
            margin: 0px;
        }
        #logo h3 {
            font-family: 'Comfortaa', cursive;
            font-size: 30px;
            color: #ffffff;
        }
        #logo img {
            height: 50px;
            margin-right: 6px;
            filter: drop-shadow(0 4px 4px rgba(0, 0, 0, 0.50));
        }
        #search-cntr {
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1rem;
            padding-left: 50px;
            padding-right: 50px;
        }
        #search {
            height: 30px;
            width: 100%;
            border-radius: 30px;
            border: none;
            font-family: 'Lato', sans-serif;
            font-size: 14px;
            letter-spacing: 30/1000em;
        }

        /* Info Grid */
        #b {
            display: flex;
            margin-top: 1rem;
            padding-left: 50px;
            padding-right: 50px;
        }
        .pg {
            width: 288px;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 1rem;
        }
        .pg iframe {
            width: 288px;
            height: 216px;
            background-color: white;
            box-shadow: 1px 1px 3px 0px rgba(46, 44, 47, 0.5);
        }
        .pg a {
            font-family: 'Lato', sans-serif;
            font-size: 18.75px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">

        <div class="row" id="h">
            <div class="col-12">
                <div class="row" id="nav-cntr">
                    <div class="col-2" id="logo">
                        <img src="spade_handle_transparent.png" alt="">
                            <h3>spade</h3>
                    </div>
                    <div class="col-7 h-link">
                        
                    </div>
                    <div class="col-1 h-link">
                        Support
                    </div>
                    <div class="col-1 h-link">
                        Premium
                    </div>
                    <div class="col-1 h-link">
                        A
                    </div>
                </div>
                <div class="row" id="search-cntr">
                    <input type="text" placeholder="Search for annotated pages..." id="search">
                </div>
            </div>
        </div>

        <div class="row justify-content-between" id="b">
        </div>
    </div>
</body>
</html>